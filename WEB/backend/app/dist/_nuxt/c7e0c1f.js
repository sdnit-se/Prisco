(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{346:function(t,e,r){"use strict";r.r(e);r(43),r(44);var o=r(79),n=r.n(o),c={props:{hostname:{type:String,default:""},ipAddress:{type:String,default:""}}},l=r(61),d=r(86),v=r.n(d),h=r(342),m=r(292),f=r(337),component=Object(l.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("v-row",{attrs:{align:"center",justify:"center"}},[e("v-col",{attrs:{cols:"12",md:"6",sm:"6"}},[e("v-text-field",{attrs:{value:this.hostname,outlined:"",readonly:"",label:"Hostname",required:""}})],1),this._v(" "),e("v-col",{attrs:{cols:"12",md:"6",sm:"6"}},[e("v-text-field",{attrs:{value:this.ipAddress,outlined:"",readonly:"",label:"New MAC-address",required:""}})],1)],1)],1)}),[],!1,null,null,null),w=component.exports;v()(component,{VCol:h.a,VRow:m.a,VTextField:f.a});var _={components:{OneSwitch:w},props:{cardHeader:{type:String,default:""},buttonText:{type:String,default:"ADD TEXT"},buttonColor:{type:String,default:"blue"},targetIpAddress:{type:String,default:""}},data:function(){return{dialog:!1,step:1,valid:!1,targetIpAddressChild:"",hostname:"",hostnameRules:[function(t){return!!t||"Hostname is required"}],ipAddress:"",ipAddressRules:[function(t){return!!t||"IP-Address is required"},function(t){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)||"Has to be formated XXX.XXX.XXX.XXX"}],description:"",failedToVerify:!1,failed:!1,failedText:"Failed to verify host, do it manually.",loadingSwitchProvisioned:!1,loadingSwitchProvisionedVerify:!1,switchProvisioned:"",switchProvisionedVerify:"",switchProvisionedVerifyDone:"",loading:!1,verifyTimesValue:0,outputFromAnsible:""}},mounted:function(){this.targetIpAddressChild=this.targetIpAddress},methods:{cancel:function(){this.dialog=!1},errorMessage:function(t){console.log(t),this.$store.commit("snackbarError",t.response.data.message),this.failed=!0,this.failedText=t.response.data.message},successMessage:function(t){this.$store.commit("snackbarSuccess",t)},errorMessageOwnText:function(t){console.log(t),this.$store.commit("snackbarError",t),this.failed=!0,this.failedText=t.response.data.message},startToVerifySwitch:function(t){if(this.loadingSwitchProvisioned=!1,this.outputFromAnsible=t.data.output,!0===t.data.success){var e=function(i){setTimeout((function(){var t=this;this.loadingSwitchProvisionedVerify=!0;try{n.a.get("/api/ping/"+this.ipAddress).then((function(e){!0===e.data.switchIsUp?(t.switchProvisionedVerifyDone=!0,t.switchProvisionedVerify=!0,t.successMessage("Switch is up and reachable!")):(t.verifyTimesValue++,t.verifyTimesValue>20?t.errorMessageOwnText("No response from switch... will not try again."):t.errorMessageOwnText("No response from switch ("+t.verifyTimesValue+"/ 20) trying again in 60 seconds...."))})).catch((function(e){t.switchProvisionedVerify=!1,t.errorMessage(e)}))}catch(t){console.log(t)}}),6e4*i)};this.loadingSwitchProvisionedVerify=!0,this.switchProvisioned=!0;var i=0;do{e(i),i++}while(i<20&&!0!==this.switchProvisionedVerify&&!1!==this.switchProvisionedVerify);this.loadingSwitchProvisionedVerify=!1,this.switchProvisionedVerify=!1}else this.switchProvisioned=!1},startToProvisionSwitch:function(){var t=this;this.loadingSwitchProvisioned=!1,this.loadingSwitchProvisionedVerify=!1,this.switchProvisioned="",this.switchProvisionedVerify="",this.switchProvisionedVerifyDone="",this.outputFromAnsible="",this.loading=!0,this.step=3;try{this.loadingSwitchProvisioned=!0;var e={target_ipAddress:this.targetIpAddressChild,ip_address:this.ipAddress,hostname:this.hostname};n.a.post("/api/provision",e).then((function(e){t.startToVerifySwitch(e)})).catch((function(e){t.loadingSwitchProvisioned=!1,t.switchProvisioned=!1,t.errorMessage(e)}))}catch(t){this.loadingSwitchProvisionedVerify=!1,this.loadingSwitchProvisioned=!1,this.$store.commit("snackbarError","Something went wrong, open up console for more information."),console.log(t)}this.loading=!1},validate:function(){this.valid&&(this.step=2)}}},y=r(298),C=r(305),V=r(347),S=r(343),P=r(344),x=r(281),A=r(125),k=r(296),T=r(306),I=r(307),D=r(301),F=r(308),X=r(345),E=Object(l.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-center"},[r("v-dialog",{attrs:{persistent:"",width:"1200"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,n=e.attrs;return[r("v-btn",t._g(t._b({staticClass:"ma-2",attrs:{color:t.buttonColor,dark:""}},"v-btn",n,!1),o),[t._v("\n                "+t._s(t.buttonText)+"\n            ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-stepper",{model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[r("div",{staticClass:"text-center mt-2 headline font-weight-light"},[t._v("\n                "+t._s(t.cardHeader)+"\n            ")]),t._v(" "),r("v-stepper-header",[r("v-stepper-step",{attrs:{complete:t.step>1,step:"1"}},[t._v("\n                    Data\n                ")]),t._v(" "),r("v-divider"),t._v(" "),r("v-stepper-step",{attrs:{complete:t.step>2,step:"2"}},[t._v("\n                    Confirm\n                ")]),t._v(" "),r("v-divider"),t._v(" "),r("v-stepper-step",{attrs:{step:"3"}},[t._v(" Provision ")])],1),t._v(" "),r("v-stepper-items",[r("v-stepper-content",{attrs:{step:"1"}},[r("v-card",{staticClass:"mb-12 pb-2 pt-2"},[r("v-form",{ref:"form",staticClass:"ma-4",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",md:"6",sm:"6"}},[r("v-text-field",{attrs:{rules:t.hostnameRules,outlined:"",label:"Hostname",required:""},model:{value:t.hostname,callback:function(e){t.hostname=e},expression:"hostname"}})],1),t._v(" "),r("v-col",{attrs:{cols:"12",md:"6",sm:"6"}},[r("v-text-field",{attrs:{rules:t.ipAddressRules,outlined:"",label:"IP address the switch will have after",required:""},model:{value:t.ipAddress,callback:function(e){t.ipAddress=e},expression:"ipAddress"}})],1)],1),t._v(" "),r("v-row",[r("v-btn",{staticClass:"ml-3 mr-4 mt-3",attrs:{disabled:!t.valid,color:"success",loading:t.loading},on:{click:t.validate}},[t._v("\n                                    Continue\n                                ")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{staticClass:"mr-4 mt-3",attrs:{text:""},on:{click:t.cancel}},[t._v("\n                                    Cancel\n                                ")])],1)],1)],1)],1),t._v(" "),r("v-stepper-content",{attrs:{step:"2"}},[r("v-card",{staticClass:"mb-12 pb-2 pt-2"},[r("v-form",{ref:"form",staticClass:"ma-4",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("div",{staticClass:"text-center"},[t.loading?r("v-progress-circular",{staticClass:"ma-4",attrs:{size:70,width:7,color:"grey",indeterminate:""}}):t._e()],1),t._v(" "),t.loading?t._e():r("div",[r("OneSwitch",{attrs:{hostname:t.hostname,"ip-address":t.ipAddress}}),t._v(" "),r("div",[t._v("\n                                    Are you sure you want to continue with\n                                    the data above?\n                                ")])],1),t._v(" "),r("v-row",[r("v-btn",{staticClass:"ml-3 mr-4 mt-3",attrs:{disabled:!t.valid,color:"success",loading:t.loading},on:{click:t.startToProvisionSwitch}},[t._v("\n                                    Continue\n                                ")]),t._v(" "),r("v-btn",{staticClass:"mr-4 mt-3",attrs:{color:"grey",loading:t.loading},on:{click:function(e){t.step=t.step-1}}},[t._v("\n                                    Back\n                                ")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{staticClass:"mr-4 mt-3",attrs:{text:""},on:{click:t.cancel}},[t._v("\n                                    Cancel\n                                ")])],1)],1)],1)],1),t._v(" "),r("v-stepper-content",{attrs:{step:"3"}},[r("v-card",{staticClass:"mb-12 pb-2 pt-2"},[r("v-form",{ref:"form",staticClass:"ma-4"},[r("div",{staticClass:"text-center"},[r("v-row",{staticClass:"font-weight-light",attrs:{align:"center",justify:"center"}},[t._v("\n                                    Provisioning Switch\n                                    "),t.loadingSwitchProvisioned?r("v-progress-circular",{staticClass:"ma-4",attrs:{size:25,width:3,color:"grey",indeterminate:""}}):t._e(),t._v(" "),!0===t.switchProvisioned?r("v-icon",{attrs:{color:"green"}},[t._v("\n                                        mdi-check-bold\n                                    ")]):t._e(),t._v(" "),!1===t.switchProvisioned?r("v-icon",{attrs:{color:"red"}},[t._v("\n                                        mdi-alert\n                                    ")]):t._e()],1),t._v(" "),r("v-row",{staticClass:"font-weight-light",attrs:{align:"center",justify:"center"}},[t._v("\n                                    Verifying Switch\n                                    "),t.loadingSwitchProvisionedVerify?r("v-progress-circular",{staticClass:"ma-4",attrs:{size:25,width:3,color:"grey",indeterminate:""}}):t._e(),t._v(" "),!0===t.switchProvisionedVerify?r("v-icon",{attrs:{color:"green"}},[t._v("\n                                        mdi-check-bold\n                                    ")]):t._e(),t._v(" "),!1===t.switchProvisionedVerify?r("v-icon",{attrs:{color:"red"}},[t._v("\n                                        mdi-alert\n                                    ")]):t._e(),t._v(" "),""===t.switchProvisioned?r("v-icon",{attrs:{color:"grey"}},[t._v("\n                                        mdi-history\n                                    ")]):t._e()],1),t._v(" "),t.switchProvisionedVerifyDone&&!t.failedToVerify?r("div",{staticClass:"font-weight-light"},[t._v("\n                                    Success, switch is provisioned.\n                                ")]):t._e(),t._v(" "),t.failed?r("div",{staticClass:"mt-10 font-weight-light"},[t._v("\n                                    "+t._s(t.failedText)+"\n                                ")]):t._e(),t._v(" "),""!==t.outputFromAnsible?r("v-textarea",{attrs:{label:"Console",height:"300",filled:"",readonly:"","full-width":""},model:{value:t.outputFromAnsible,callback:function(e){t.outputFromAnsible=e},expression:"outputFromAnsible"}}):t._e()],1),t._v(" "),r("v-row",[r("v-btn",{staticClass:"ml-3 mr-4 mt-3",attrs:{color:"grey",loading:t.loading},on:{click:function(e){t.step=t.step-1}}},[t._v("\n                                    Back\n                                ")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{staticClass:"mr-4 mt-3",attrs:{text:""},on:{click:t.cancel}},[t._v("\n                                    Cancel\n                                ")])],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null),R=E.exports;v()(E,{VBtn:y.a,VCard:C.a,VCol:h.a,VDialog:V.a,VDivider:S.a,VForm:P.a,VIcon:x.a,VProgressCircular:A.a,VRow:m.a,VSpacer:k.a,VStepper:T.a,VStepperContent:I.a,VStepperHeader:D.a,VStepperItems:D.b,VStepperStep:F.a,VTextField:f.a,VTextarea:X.a});var $={components:{ProvisionSwitchStepper:R},props:{macAddress:{type:String,default:"MAC HERE"},targetIpAddress:{type:String,default:""}},data:function(){return{dialog:!1}},methods:{cancel:function(){this.dialog=!1}}},M=r(300),O=Object(l.a)($,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-center"},[r("v-dialog",{attrs:{width:"1200"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,n=e.attrs;return[r("v-btn",t._g(t._b({staticClass:"ma-2",attrs:{color:"green",dark:""}},"v-btn",n,!1),o),[t._v("\n                "+t._s(t.macAddress)+"\n            ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("div",{staticClass:"pa-4 text-center headline"},[t._v("\n                What would you like to do with "),r("b",[t._v(t._s(t.macAddress))])]),t._v(" "),r("v-card-text",[r("v-row",{attrs:{align:"center",justify:"center"}},[r("ProvisionSwitchStepper",{attrs:{"button-text":"Recover Switch","button-color":"blue","card-header":"Recover Switch","mac-address":t.macAddress,"target-ip-address":t.targetIpAddress}})],1)],1),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{staticClass:"mr-4 mt-3",attrs:{text:""},on:{click:t.cancel}},[t._v("\n                    Cancel\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null),j=O.exports;v()(O,{VBtn:y.a,VCard:C.a,VCardActions:M.a,VCardText:M.b,VDialog:V.a,VRow:m.a,VSpacer:k.a});var H={components:{WhatToDoWithSwitch:j},data:function(){return{loading:!0,search:"",ztpSwitches:[]}},mounted:function(){var t=this;this.loading=!0;try{n.a.get("/api/leases").then((function(e){200!==e.status||e.data.includes("html")||null===e.data||(t.ztpSwitches=e.data)})).catch((function(e){t.$store.commit("snackbarError",e.response.data.message)}))}catch(t){console.log(t),this.$store.commit("snackbarError","Something went wrong, contact admin or read console output.")}this.loading=!1}},z=Object(l.a)(H,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mt-12 text-center"},[r("div",{staticClass:"mt-12 display-4 font-weight-light"},[t._v("PRISCO")]),t._v(" "),r("div",{staticClass:"mb-10 display-1 font-weight-light"},[t._v("\n        Zero Touch Cisco Provisioning System\n    ")]),t._v(" "),r("v-card",{staticClass:"mt-12 font-weight-light",attrs:{"min-height":"300"}},[r("v-card-title",{attrs:{center:""}},[t._v(" Switches found in ZTP mode ")]),t._v(" "),r("v-card-text",[r("div",{staticClass:"text-center"},[t.loading?r("v-progress-circular",{staticClass:"ma-4",attrs:{size:70,width:7,color:"primary",indeterminate:""}}):r("div",[r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search for property","single-line":"",filled:"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),t.ztpSwitches.length>0?r("v-row",t._l(t.ztpSwitches,(function(t,i){return r("v-col",{key:i,attrs:{cols:"12",md:"4",sm:"6"}},[r("WhatToDoWithSwitch",{attrs:{"mac-address":t.mac_address,"target-ip-address":t.ip_address}})],1)})),1):r("v-row",{attrs:{align:"center",justify:"center"}},[r("div",{staticClass:"mt-8 headline font-weight-light"},[t._v("\n                            No Switches Found In ZTP-DHCP.\n                        ")])])],1)],1)])],1)],1)}),[],!1,null,null,null);e.default=z.exports;v()(z,{VCard:C.a,VCardText:M.b,VCardTitle:M.c,VCol:h.a,VProgressCircular:A.a,VRow:m.a,VTextField:f.a})}}]);